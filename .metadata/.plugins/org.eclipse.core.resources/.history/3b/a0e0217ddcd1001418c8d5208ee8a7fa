package edu.jhu.cs.wilkes.cs335.assignment4.traditional;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Scanner;

/**
 * Main class to perform classification of data sets
 * @author Ian Wilkes
 *
 */
public class DecisionTreeClassifier {

	public static void main(String[] args) {
		// checking the number of arguments
		if (args.length != 2) {
			System.err.println("Error: incorrect number of arguments.");
			System.out.println("Usage: DecisionTreeClassifier <path to training data> <path to testing data>");
			System.exit(1);
		}

		List<CaseForClassification> trainingData = null;
		List<CaseForClassification> testingData = null;
		
		try {
			trainingData = parseDataFile(args[0]);
		} catch (FileNotFoundException e) {
			System.err.println("Error: data could not be found for file: \n" + args[0]);
			System.exit(1);
		}
		try {
			testingData = parseDataFile(args[1]);
		} catch (FileNotFoundException e) {
			System.err.println("Error: data could not be found for file: \n" + args[1]);
			System.exit(1);
		}

		for (CaseForClassification element : trainingData) {
			System.out.println(element);
		}

	}

	/**
	 * Reads a data file and produces a list of the cases to be classified.
	 * @param reader the Scanner which ha
	 * @return
	 * @throws FileNotFoundException 
	 */
	public static List<CaseForClassification> parseDataFile (String fileToRead) throws FileNotFoundException {
		Scanner reader = new Scanner(new FileReader(fileToRead));
		List<CaseForClassification> toReturn = new ArrayList<CaseForClassification>();
		List<String> identifiers;
		String currentLine;
		String classification;
		
		while(reader.hasNextLine()) {
			currentLine = reader.nextLine();
			identifiers = Arrays.asList(currentLine.split(","));
			classification = identifiers.get(0);
			identifiers.remove(0);
			toReturn.add(new CaseForClassification(classification, identifiers));
		}
		if (toReturn.isEmpty()) {
			System.out.println("Error: data file is null");
			return null;
		}
		return toReturn;
	}

}
